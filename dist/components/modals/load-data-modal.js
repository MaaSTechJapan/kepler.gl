"use strict";

var _interopRequireWildcard = require("@babel/runtime/helpers/interopRequireWildcard");

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _extends2 = _interopRequireDefault(require("@babel/runtime/helpers/extends"));

var _slicedToArray2 = _interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));

var _taggedTemplateLiteral2 = _interopRequireDefault(require("@babel/runtime/helpers/taggedTemplateLiteral"));

var _react = _interopRequireWildcard(require("react"));

var _propTypes = _interopRequireDefault(require("prop-types"));

var _styledComponents = _interopRequireDefault(require("styled-components"));

var _lodash = _interopRequireDefault(require("lodash.get"));

var _fileUpload = _interopRequireDefault(require("../common/file-uploader/file-upload"));

var _loadStorageMap = _interopRequireDefault(require("./load-storage-map"));

var _modalTabs = _interopRequireDefault(require("./modal-tabs"));

var _loadingDialog = _interopRequireDefault(require("./loading-dialog"));

var _defaultSettings = require("../../constants/default-settings");

function _templateObject() {
  var data = (0, _taggedTemplateLiteral2["default"])(["\n  padding: ", ";\n  min-height: 440px;\n  display: flex;\n  flex-direction: column;\n"]);

  _templateObject = function _templateObject() {
    return data;
  };

  return data;
}

var StyledLoadDataModal = _styledComponents["default"].div.attrs({
  className: 'load-data-modal'
})(_templateObject(), function (props) {
  return props.theme.modalPadding;
});

var noop = function noop() {};

var getDefaultMethod = function getDefaultMethod(methods) {
  return Array.isArray(methods) ? (0, _lodash["default"])(methods, [0]) : null;
};

LoadDataModalFactory.deps = [_modalTabs["default"], _fileUpload["default"], _loadStorageMap["default"]];

function LoadDataModalFactory(ModalTabs, FileUpload, LoadStorageMap) {
  var LoadDataModal = function LoadDataModal(props) {
    var fileLoading = props.fileLoading,
        loadingMethods = props.loadingMethods,
        isCloudMapLoading = props.isCloudMapLoading;

    var _useState = (0, _react.useState)(getDefaultMethod(loadingMethods)),
        _useState2 = (0, _slicedToArray2["default"])(_useState, 2),
        currentMethod = _useState2[0],
        toggleMethod = _useState2[1];

    return /*#__PURE__*/_react["default"].createElement(StyledLoadDataModal, null, /*#__PURE__*/_react["default"].createElement(ModalTabs, {
      currentMethod: currentMethod.id,
      loadingMethods: loadingMethods,
      toggleMethod: toggleMethod
    }), fileLoading || isCloudMapLoading ? /*#__PURE__*/_react["default"].createElement(_loadingDialog["default"], {
      size: 64
    }) : currentMethod && /*#__PURE__*/_react["default"].createElement(currentMethod.elementType, (0, _extends2["default"])({
      key: currentMethod.id
    }, props)));
  };

  LoadDataModal.propTypes = {
    // call backs
    onFileUpload: _propTypes["default"].func.isRequired,
    onLoadCloudMap: _propTypes["default"].func.isRequired,
    fileLoading: _propTypes["default"].bool,
    loadingMethods: _propTypes["default"].arrayOf(_propTypes["default"].shape({
      id: _propTypes["default"].string,
      label: _propTypes["default"].string,
      elementType: _propTypes["default"].elementType,
      tabElementType: _propTypes["default"].elementType
    }))
  };
  LoadDataModal.defaultProps = {
    onFileUpload: noop,
    fileLoading: false,
    loadingMethods: [{
      id: _defaultSettings.LOADING_METHODS.upload,
      label: 'Load Files',
      elementType: FileUpload
    }, {
      id: _defaultSettings.LOADING_METHODS.storage,
      label: 'Load from Storage',
      elementType: LoadStorageMap
    }]
  };
  return LoadDataModal;
}

var _default = LoadDataModalFactory;
exports["default"] = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9jb21wb25lbnRzL21vZGFscy9sb2FkLWRhdGEtbW9kYWwuanMiXSwibmFtZXMiOlsiU3R5bGVkTG9hZERhdGFNb2RhbCIsInN0eWxlZCIsImRpdiIsImF0dHJzIiwiY2xhc3NOYW1lIiwicHJvcHMiLCJ0aGVtZSIsIm1vZGFsUGFkZGluZyIsIm5vb3AiLCJnZXREZWZhdWx0TWV0aG9kIiwibWV0aG9kcyIsIkFycmF5IiwiaXNBcnJheSIsIkxvYWREYXRhTW9kYWxGYWN0b3J5IiwiZGVwcyIsIk1vZGFsVGFic0ZhY3RvcnkiLCJGaWxlVXBsb2FkRmFjdG9yeSIsIkxvYWRTdG9yYWdlTWFwRmFjdG9yeSIsIk1vZGFsVGFicyIsIkZpbGVVcGxvYWQiLCJMb2FkU3RvcmFnZU1hcCIsIkxvYWREYXRhTW9kYWwiLCJmaWxlTG9hZGluZyIsImxvYWRpbmdNZXRob2RzIiwiaXNDbG91ZE1hcExvYWRpbmciLCJjdXJyZW50TWV0aG9kIiwidG9nZ2xlTWV0aG9kIiwiaWQiLCJwcm9wVHlwZXMiLCJvbkZpbGVVcGxvYWQiLCJQcm9wVHlwZXMiLCJmdW5jIiwiaXNSZXF1aXJlZCIsIm9uTG9hZENsb3VkTWFwIiwiYm9vbCIsImFycmF5T2YiLCJzaGFwZSIsInN0cmluZyIsImxhYmVsIiwiZWxlbWVudFR5cGUiLCJ0YWJFbGVtZW50VHlwZSIsImRlZmF1bHRQcm9wcyIsIkxPQURJTkdfTUVUSE9EUyIsInVwbG9hZCIsInN0b3JhZ2UiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBb0JBOztBQUNBOztBQUNBOztBQUNBOztBQUVBOztBQUNBOztBQUNBOztBQUVBOztBQUNBOzs7Ozs7Ozs7Ozs7QUFFQSxJQUFNQSxtQkFBbUIsR0FBR0MsNkJBQU9DLEdBQVAsQ0FBV0MsS0FBWCxDQUFpQjtBQUMzQ0MsRUFBQUEsU0FBUyxFQUFFO0FBRGdDLENBQWpCLENBQUgsb0JBR1osVUFBQUMsS0FBSztBQUFBLFNBQUlBLEtBQUssQ0FBQ0MsS0FBTixD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LyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYSBjb3B5XG4vLyBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSBcIlNvZnR3YXJlXCIpLCB0byBkZWFsXG4vLyBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzXG4vLyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsXG4vLyBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXNcbi8vIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnM6XG4vL1xuLy8gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQgaW5cbi8vIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuLy9cbi8vIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1Jcbi8vIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLFxuLy8gRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFXG4vLyBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSXG4vLyBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLFxuLy8gT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTlxuLy8gVEhFIFNPRlRXQVJFLlxuXG5pbXBvcnQgUmVhY3QsIHt1c2VTdGF0ZX0gZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gJ3Byb3AtdHlwZXMnO1xyXG5pbXBvcnQgc3R5bGVkIGZyb20gJ3N0eWxlZC1jb21wb25lbnRzJztcclxuaW1wb3J0IGdldCBmcm9tICdsb2Rhc2guZ2V0JztcclxuXHJcbmltcG9ydCBGaWxlVXBsb2FkRmFjdG9yeSBmcm9tICdjb21wb25lbnRzL2NvbW1vbi9maWxlLXVwbG9hZGVyL2ZpbGUtdXBsb2FkJztcclxuaW1wb3J0IExvYWRTdG9yYWdlTWFwRmFjdG9yeSBmcm9tICcuL2xvYWQtc3RvcmFnZS1tYXAnO1xyXG5pbXBvcnQgTW9kYWxUYWJzRmFjdG9yeSBmcm9tICcuL21vZGFsLXRhYnMnO1xyXG5cclxuaW1wb3J0IExvYWRpbmdEaWFsb2cgZnJvbSAnLi9sb2FkaW5nLWRpYWxvZyc7XHJcbmltcG9ydCB7TE9BRElOR19NRVRIT0RTfSBmcm9tICdjb25zdGFudHMvZGVmYXVsdC1zZXR0aW5ncyc7XHJcblxyXG5jb25zdCBTdHlsZWRMb2FkRGF0YU1vZGFsID0gc3R5bGVkLmRpdi5hdHRycyh7XHJcbiAgY2xhc3NOYW1lOiAnbG9hZC1kYXRhLW1vZGFsJ1xyXG59KWBcclxuICBwYWRkaW5nOiAke3Byb3BzID0+IHByb3BzLnRoZW1lLm1vZGFsUGFkZGluZ307XHJcbiAgbWluLWhlaWdodDogNDQwcHg7XHJcbiAgZGlzcGxheTogZmxleDtcclxuICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xyXG5gO1xyXG5cclxuY29uc3Qgbm9vcCA9ICgpID0+IHt9O1xyXG5jb25zdCBnZXREZWZhdWx0TWV0aG9kID0gbWV0aG9kcyA9PiAoQXJyYXkuaXNBcnJheShtZXRob2RzKSA/IGdldChtZXRob2RzLCBbMF0pIDogbnVsbCk7XHJcblxyXG5Mb2FkRGF0YU1vZGFsRmFjdG9yeS5kZXBzID0gW01vZGFsVGFic0ZhY3RvcnksIEZpbGVVcGxvYWRGYWN0b3J5LCBMb2FkU3RvcmFnZU1hcEZhY3RvcnldO1xyXG5cclxuZnVuY3Rpb24gTG9hZERhdGFNb2RhbEZhY3RvcnkoTW9kYWxUYWJzLCBGaWxlVXBsb2FkLCBMb2FkU3RvcmFnZU1hcCkge1xyXG4gIGNvbnN0IExvYWREYXRhTW9kYWwgPSBwcm9wcyA9PiB7XHJcbiAgICBjb25zdCB7ZmlsZUxvYWRpbmcsIGxvYWRpbmdNZXRob2RzLCBpc0Nsb3VkTWFwTG9hZGluZ30gPSBwcm9wcztcclxuICAgIGNvbnN0IFtjdXJyZW50TWV0aG9kLCB0b2dnbGVNZXRob2RdID0gdXNlU3RhdGUoZ2V0RGVmYXVsdE1ldGhvZChsb2FkaW5nTWV0aG9kcykpO1xyXG5cclxuICAgIHJldHVybiAoXHJcbiAgICAgIDxTdHlsZWRMb2FkRGF0YU1vZGFsPlxyXG4gICAgICAgIDxNb2RhbFRhYnNcclxuICAgICAgICAgIGN1cnJlbnRNZXRob2Q9e2N1cnJlbnRNZXRob2QuaWR9XHJcbiAgICAgICAgICBsb2FkaW5nTWV0aG9kcz17bG9hZGluZ01ldGhvZHN9XHJcbiAgICAgICAgICB0b2dnbGVNZXRob2Q9e3RvZ2dsZU1ldGhvZH1cclxuICAgICAgICAvPlxyXG4gICAgICAgIHtmaWxlTG9hZGluZyB8fCBpc0Nsb3VkTWFwTG9hZGluZyA/IChcclxuICAgICAgICAgIDxMb2FkaW5nRGlhbG9nIHNpemU9ezY0fSAvPlxyXG4gICAgICAgICkgOiAoXHJcbiAgICAgICAgICBjdXJyZW50TWV0aG9kICYmIDxjdXJyZW50TWV0aG9kLmVsZW1lbnRUeXBlIGtleT17Y3VycmVudE1ldGhvZC5pZH0gey4uLnByb3BzfSAvPlxyXG4gICAgICAgICl9XHJcbiAgICAgIDwvU3R5bGVkTG9hZERhdGFNb2RhbD5cclxuICAgICk7XHJcbiAgfTtcclxuXHJcbiAgTG9hZERhdGFNb2RhbC5wcm9wVHlwZXMgPSB7XHJcbiAgICAvLyBjYWxsIGJhY2tzXHJcbiAgICBvbkZpbGVVcGxvYWQ6IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsXHJcbiAgICBvbkxvYWRDbG91ZE1hcDogUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcclxuICAgIGZpbGVMb2FkaW5nOiBQcm9wVHlwZXMuYm9vbCxcclxuICAgIGxvYWRpbmdNZXRob2RzOiBQcm9wVHlwZXMuYXJyYXlPZihcclxuICAgICAgUHJvcFR5cGVzLnNoYXBlKHtcclxuICAgICAgICBpZDogUHJvcFR5cGVzLnN0cmluZyxcclxuICAgICAgICBsYWJlbDogUHJvcFR5cGVzLnN0cmluZyxcclxuICAgICAgICBlbGVtZW50VHlwZTogUHJvcFR5cGVzLmVsZW1lbnRUeXBlLFxyXG4gICAgICAgIHRhYkVsZW1lbnRUeXBlOiBQcm9wVHlwZXMuZWxlbWVudFR5cGVcclxuICAgICAgfSlcclxuICAgIClcclxuICB9O1xyXG5cclxuICBMb2FkRGF0YU1vZGFsLmRlZmF1bHRQcm9wcyA9IHtcclxuICAgIG9uRmlsZVVwbG9hZDogbm9vcCxcclxuICAgIGZpbGVMb2FkaW5nOiBmYWxzZSxcclxuICAgIGxvYWRpbmdNZXRob2RzOiBbXHJcbiAgICAgIHtcclxuICAgICAgICBpZDogTE9BRElOR19NRVRIT0RTLnVwbG9hZCxcclxuICAgICAgICBsYWJlbDogJ0xvYWQgRmlsZXMnLFxyXG4gICAgICAgIGVsZW1lbnRUeXBlOiBGaWxlVXBsb2FkXHJcbiAgICAgIH0sXHJcbiAgICAgIHtcclxuICAgICAgICBpZDogTE9BRElOR19NRVRIT0RTLnN0b3JhZ2UsXHJcbiAgICAgICAgbGFiZWw6ICdMb2FkIGZyb20gU3RvcmFnZScsXHJcbiAgICAgICAgZWxlbWVudFR5cGU6IExvYWRTdG9yYWdlTWFwXHJcbiAgICAgIH1cclxuICAgIF1cclxuICB9O1xyXG4gIHJldHVybiBMb2FkRGF0YU1vZGFsO1xyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBMb2FkRGF0YU1vZGFsRmFjdG9yeTtcclxuIl19